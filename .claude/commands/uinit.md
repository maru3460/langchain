# プロジェクト初期化コマンド

**深く考えて**プロジェクトの性質を理解し、適切な`.claude/init.md`ファイルを作成してください。

## やること

1. **プロジェクトの文脈を深く分析**

   - ディレクトリ構造とファイル名から用途を推測
   - コミット履歴、コントリビューター数、ブランチ戦略を確認
   - 個人開発か業務用かを判断（複数コントリビューター、厳格な構造、CI/CD 等から判断）

2. **技術スタックの詳細分析**

   - 使用言語、フレームワーク、ライブラリの特定
   - 依存関係の複雑さとバージョン管理戦略の確認
   - 開発・本番環境の分離レベルを調査

3. **プロジェクトタイプに応じた重点項目の決定**
   - **個人開発**: シンプルさ、実験性、学習要素に焦点
   - **業務用**: 保守性、チーム協調、品質保証、セキュリティに焦点

## 出力先

`.claude/init.md`

## 出力内容

プロジェクトの性質を**よく考えて**判断し、以下の要素から適切なものを選択・組み合わせしてください：

### 基本要素（すべてのプロジェクトに含める）

- **概要**: プロジェクトの目的・価値
- **技術スタック**: 使用技術とその選択理由
- **クイックスタート**: 最低限の起動手順

### 規模・性質に応じて選択する要素

#### 🏠 個人・小規模プロジェクト向け

- **学習目標・実験要素**: 何を学ぼうとしているか、試したい技術
- **今後の計画**: 実装予定機能、改善したいポイント
- **開発メモ**: つまづいたポイント、参考リンク、気づき

#### 🏢 チーム・中規模プロジェクト向け

- **開発環境セットアップ**: 詳細な環境構築手順
- **プロジェクト構造**: 重要なディレクトリ・ファイルの役割
- **開発ルール**: コーディング規約、ブランチ戦略の基本
- **テスト**: テスト実行方法、基本的なテスト戦略

#### 🏭 業務・大規模プロジェクト向け

- **開発ワークフロー**: ブランチ戦略、コードレビュープロセス
- **CI/CD パイプライン**: 自動化されたビルド・テスト・デプロイ
- **テスト戦略**: カバレッジ要件、テストレベル（単体・結合・E2E）
- **デプロイメント**: 環境別設定、リリースプロセス、ロールバック
- **セキュリティ・コンプライアンス**: セキュリティ要件、監査ポイント
- **運用・監視**: ログ、メトリクス、アラート、SLA
- **チーム情報**: 担当者、連絡先、エスカレーション手順
- **ドキュメント管理**: 設計書、API 仕様書の場所
- **依存関係管理**: ライブラリ更新ポリシー、脆弱性対応

#### 📊 データ・分析プロジェクト向け

- **データソース**: データの取得元、更新頻度
- **分析環境**: Jupyter、データベース接続情報
- **データパイプライン**: ETL 処理、スケジューリング

#### 🎮 プロトタイプ・実験プロジェクト向け

- **実験仮説**: 何を検証しようとしているか
- **成功指標**: どうなったら成功か
- **制約・前提**: 時間的制約、技術的制約

## 実行手順

1. **コンテキストの深い理解**

   - `git log --oneline -10` でコミット履歴を確認
   - `git branch -r` でブランチ戦略を把握
   - `.github/`, `.gitlab-ci.yml`, `Dockerfile` 等の存在確認
   - `package.json`, `requirements.txt` 等で依存関係の複雑さを評価

2. **プロジェクト規模の判定**

   - **個人・小規模**: 単一コントリビューター、シンプルな構造、学習・実験目的
   - **チーム・中規模**: 複数コントリビューター、基本的な CI、明確な役割分担
   - **業務・大規模**: 厳格なガバナンス、複雑な CI/CD、運用要件、コンプライアンス

3. **要素の取捨選択基準**
   **必ず考慮すべき観点**:

   - このプロジェクトで本当に必要な情報は何か？
   - 過剰な要素は含めていないか？
   - 不足している重要な要素はないか？
   - チームメンバー（または将来の自分）が求める情報は何か？

4. **動的な構造決定**

   - 基本要素は必須として含める
   - プロジェクトの実際の複雑さに応じて追加要素を選択
   - 存在しない要素（例：CI/CD がないのに運用監視セクション）は含めない
   - プロジェクトタイプ特有の要素があれば追加

5. **`.claude/init.md`の生成**
   - 選択した要素のみでマークダウンを構成
   - 実際のプロジェクト状況に基づいて内容を記述
   - 将来の拡張を見越した適度な柔軟性を保持

**重要**: テンプレートに従うのではなく、**このプロジェクトの現実に合わせて**必要な要素だけを組み合わせてください。個人の週末プロジェクトに「オンコール体制」は不要ですし、エンタープライズシステムに「学習メモ」は不適切です。

## 最後に

以下のコマンドを実行する

```shell
./update_claude.sh
```
